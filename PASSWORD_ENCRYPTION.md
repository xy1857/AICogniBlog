# 密码加密传输实现说明

## 概述
前后端密码传输已改为 RSA 加密方式，确保密码在网络传输过程中的安全性。

## 实现方案

### 后端实现

1. **RSA 工具类** (`RsaUtil.java`)
   - 提供 RSA 密钥对生成
   - 提供加密/解密方法
   - 支持 Base64 编码的密钥字符串

2. **密钥配置** (`application.yml`)
   ```yaml
   rsa:
     public-key: [公钥字符串]
     private-key: [私钥字符串]
   ```

3. **公钥接口** (`PublicKeyController.java`)
   - 路径: `GET /api/auth/public-key`
   - 返回公钥供前端使用
   - 无需认证即可访问

4. **密码解密**
   - `AuthServiceImpl`: 登录和注册时解密密码
   - `UserController`: 修改密码时解密旧密码和新密码

### 前端实现

1. **加密工具** (`crypto.ts`)
   - 使用 `jsencrypt` 库进行 RSA 加密
   - 自动获取并缓存公钥
   - 提供 `encryptPasswordAuto()` 方法

2. **页面修改**
   - `LoginView.vue`: 登录时加密密码
   - `RegisterView.vue`: 注册时加密密码
   - `ProfileView.vue`: 修改密码时加密新旧密码

## 使用流程

1. 前端页面加载时，自动从后端获取公钥
2. 用户输入密码后，前端使用公钥加密
3. 加密后的密文通过 HTTPS 传输到后端
4. 后端使用私钥解密得到原始密码
5. 后端使用 BCrypt 对密码进行哈希存储

## 安全特性

- ✅ 密码在传输过程中使用 RSA 2048 位加密
- ✅ 后端私钥不对外暴露
- ✅ 每次加密结果不同（RSA 填充机制）
- ✅ 密码最终使用 BCrypt 哈希存储
- ✅ 建议配合 HTTPS 使用，提供双重保护

## 测试步骤

1. 启动后端服务
2. 启动前端服务
3. 访问注册页面，注册新用户
4. 使用新用户登录
5. 在个人中心修改密码
6. 使用新密码重新登录

## 注意事项

- 生产环境应使用固定的密钥对，不要每次启动都重新生成
- 私钥必须妥善保管，不能泄露
- 建议定期更换密钥对（需要考虑兼容性）
- RSA 加密有长度限制，密码长度不应超过 200 字符




