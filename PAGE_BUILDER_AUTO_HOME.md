# 装修主页自动显示功能使用说明

## 功能概述

现在用户装修完博客后，可以将装修页面设为默认主页。登录后访问首页时，会自动显示装修的个性化页面。

---

## 使用步骤

### 1. 装修你的主页

1. 登录账号
2. 点击用户名 → "页面装修"
3. 拖拽组件，配置样式
4. 装修完成

### 2. 设为默认主页

在装修器中，点击"保存"按钮旁边的下拉箭头，选择：
- **"保存并设为默认主页"**

这样设置后，下次访问首页时会自动显示装修页面。

### 3. 访问主页

访问 `http://localhost:5174/` 时：

#### 情况A：已设为默认主页
- ✅ 自动显示装修页面
- ✅ 显示真实数据（文章、分类、留言等）
- ✅ 顶部有"返回默认主页"和"编辑装修"按钮

#### 情况B：未设为默认主页
- ✅ 显示传统的文章列表主页
- ✅ 如果有装修页面，会显示提示横幅
- ✅ 点击"查看装修主页"可以切换

---

## 功能特点

### 1. 智能检测
- 自动检测用户是否有装修页面
- 根据设置决定显示哪个主页
- 无缝切换，不影响体验

### 2. 灵活切换
- **装修主页** ↔ **默认主页** 随时切换
- 点击"返回默认主页"即可切换回传统主页
- 点击"查看装修主页"可以查看装修效果

### 3. 个性化展示
- 装修主页显示你配置的所有组件
- 所有组件都是真实数据
- 完全个性化的博客体验

---

## 界面说明

### 装修器保存菜单

点击"保存"按钮的下拉菜单，有三个选项：

1. **保存配置**
   - 仅保存装修配置
   - 不改变主页显示设置

2. **保存并设为默认主页** ⭐
   - 保存配置
   - 设置为默认主页
   - 下次访问首页自动显示装修页面

3. **取消默认主页**
   - 取消默认主页设置
   - 下次访问首页显示传统主页
   - 装修配置不会丢失

### 主页显示

#### 装修主页模式
```
┌─────────────────────────────────────────┐
│ [返回默认主页]          [编辑装修]      │
├─────────────────────────────────────────┤
│                                         │
│  你的装修组件（Hero横幅、文章网格等）    │
│                                         │
└─────────────────────────────────────────┘
```

#### 默认主页模式（有装修页面时）
```
┌─────────────────────────────────────────┐
│ ℹ️ 你已装修了个人主页                    │
│   查看你的装修页面，展示个性化内容        │
│                      [查看装修主页]      │
├─────────────────────────────────────────┤
│                                         │
│  传统文章列表                            │
│                                         │
└─────────────────────────────────────────┘
```

---

## 数据存储

### localStorage 键值

1. **pageConfig_username**
   - 存储用户的装修配置
   - 用于个人主页和装修主页显示

2. **autoShowCustomPage_username**
   - 存储是否自动显示装修主页
   - 值为 'true' 时自动显示

### 示例
```javascript
// 用户 admin 的配置
localStorage.setItem('pageConfig_admin', '{ ... }')

// 设为默认主页
localStorage.setItem('autoShowCustomPage_admin', 'true')

// 取消默认主页
localStorage.removeItem('autoShowCustomPage_admin')
```

---

## 使用场景

### 场景1：个人博客展示
- 装修一个精美的主页
- 设为默认主页
- 访客看到的是你的个性化页面

### 场景2：临时切换
- 平时使用传统主页
- 需要时点击"查看装修主页"
- 不设为默认，保持灵活性

### 场景3：多种风格
- 装修多个不同风格的页面
- 随时切换显示
- 满足不同场景需求

---

## 常见问题

### Q1: 如何知道是否设为了默认主页？
**A:** 访问首页时，如果自动显示装修页面，说明已设为默认。

### Q2: 如何切换回传统主页？
**A:** 点击装修主页顶部的"返回默认主页"按钮。

### Q3: 取消默认主页后，装修配置会丢失吗？
**A:** 不会！装修配置仍然保存，只是不自动显示。

### Q4: 未登录用户看到什么？
**A:** 未登录用户看到传统的文章列表主页。

### Q5: 如何让其他人看到我的装修主页？
**A:** 分享你的个人主页链接：`/home/你的用户名`

### Q6: 装修主页和个人主页有什么区别？
**A:** 
- **装修主页**：在首页 `/` 显示，仅自己可见
- **个人主页**：在 `/home/username` 显示，所有人可见

---

## 技术实现

### 检测逻辑
```typescript
// 1. 检查用户是否登录
if (!auth.isLoggedIn) return;

// 2. 检查是否有装修配置
const config = localStorage.getItem(`pageConfig_${username}`);
if (!config) return;

// 3. 检查是否设为默认
const autoShow = localStorage.getItem(`autoShowCustomPage_${username}`);
if (autoShow === 'true') {
  showCustomPage = true;
}
```

### 组件结构
```
HomeView.vue
├── 检测装修页面
├── 显示装修主页 (PagePreview)
│   └── 加载用户配置
│   └── 渲染所有组件
└── 显示默认主页
    ├── 提示横幅（如果有装修）
    └── 文章列表
```

---

## 优势

### 1. 用户体验好
- ✅ 自动检测，无需手动切换
- ✅ 一键设置，简单方便
- ✅ 随时切换，灵活自由

### 2. 个性化强
- ✅ 完全自定义的主页
- ✅ 真实数据展示
- ✅ 多种组件组合

### 3. 不影响原功能
- ✅ 传统主页仍可访问
- ✅ 装修配置独立存储
- ✅ 可以随时恢复

---

## 下一步

### 已实现
- ✅ 自动检测装修页面
- ✅ 设为默认主页功能
- ✅ 灵活切换功能
- ✅ 提示横幅

### 可选扩展
- ⏳ 云端存储配置
- ⏳ 多套装修方案
- ⏳ 定时切换主页
- ⏳ 访客统计

---

## 总结

现在用户可以：
1. 装修个性化主页
2. 一键设为默认主页
3. 登录后自动显示装修页面
4. 随时切换回传统主页
5. 分享个人主页给其他人

功能完整，体验流畅！🎉

